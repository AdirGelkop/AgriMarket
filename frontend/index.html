<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AgriMarket - Blockchain Agricultural Platform</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/web3/1.10.0/web3.min.js"></script>
    <script src="config.js"></script>
</head>
<body>
    <nav class="navbar">
        <div class="nav-brand">üåæ AgriMarket</div>
        <ul class="nav-links">
            <li><a href="#" onclick="showPage('home')">Home</a></li>
            <li><a href="#" onclick="showPage('farmer')">Farmer</a></li>
            <li><a href="#" onclick="showPage('retailer')">Retailer</a></li>
        </ul>
    </nav>

    <div id="home-page" class="page active">
        <h1>üåæ Welcome to AgriMarket</h1>
        <p>The future of agricultural trading on blockchain</p>
        <div class="card">
            <h3>üöú For Farmers</h3>
            <p>Create smart contracts for your crops and get guaranteed payments</p>
        </div>
        <div class="card">
            <h3>üè™ For Retailers</h3>
            <p>Browse verified agricultural products and secure your supply chain</p>
        </div>
    </div>

    <div id="farmer-page" class="page">
        <h1>üöú Farmer Dashboard</h1>
        <p>Manage your crops and monitor your contracts</p>
        
        <!-- Create New Contract Section -->
        <div class="card">
            <h3>Create New Contract</h3>
            <form id="create-contract-form">
                <div class="form-group">
                    <label for="crop-type">Crop Type:</label>
                    <select id="crop-type" required>
                        <option value="">Select crop</option>
                        <option value="tomato">üçÖ Tomato</option>
                        <option value="cucumber">ü•í Cucumber</option>
                        <option value="onion">üßÖ Onion</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="quantity">Quantity (kg):</label>
                    <input type="number" id="quantity" min="1" required>
                </div>
                <div class="form-group">
                    <label for="price-per-kg">Price per kg (AgriCoin):</label>
                    <input type="number" id="price-per-kg" min="0.01" step="0.01" required>
                </div>
                <button type="submit" class="submit-btn">Create Contract</button>
            </form>
        </div>

        <!-- My Contracts Section -->
        <div class="card">
            <h3>My Active Contracts</h3>
            <div id="farmer-contracts-list">
                <p>Loading contracts...</p>
            </div>
        </div>

        <!-- Upload Milestone Section -->
        <div class="card">
            <h3>Upload Milestone Evidence</h3>
            <form id="milestone-form">
                <div class="form-group">
                    <label for="contract-id">Contract ID:</label>
                    <input type="text" id="contract-id" placeholder="Enter contract ID" required>
                </div>
                <div class="form-group">
                    <label for="milestone-stage">Milestone Stage:</label>
                    <select id="milestone-stage" required>
                        <option value="">Select stage</option>
                        <option value="1">Stage 1 - Planting</option>
                        <option value="2">Stage 2 - Growing</option>
                        <option value="3">Stage 3 - Harvest</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="evidence-description">Description:</label>
                    <textarea id="evidence-description" placeholder="Describe your milestone evidence" required></textarea>
                </div>
                <div class="form-group">
                    <label for="evidence-image">Upload Image:</label>
                    <input type="file" id="evidence-image" accept="image/*">
                </div>
                <button type="submit" class="submit-btn">Submit Milestone</button>
            </form>
        </div>
    </div>

    <div id="retailer-page" class="page">
        <h1>üè™ Retailer Dashboard</h1>
        <p>Discover and purchase quality agricultural products</p>
        
        <!-- Available Contracts Section -->
        <div class="card">
            <h3>Available Contracts</h3>
            <div id="available-contracts-list">
                <p>Loading available contracts...</p>
            </div>
        </div>
    
        <!-- My Purchased Contracts Section -->
        <div class="card">
            <h3>My Purchased Contracts</h3>
            <div id="retailer-contracts-list">
                <p>Loading your contracts...</p>
            </div>
        </div>
    
        <!-- Contract Approval Section -->
        <div class="card">
            <h3>Approve Milestone</h3>
            <form id="approve-milestone-form">
                <div class="form-group">
                    <label for="approve-contract-id">Contract ID:</label>
                    <input type="text" id="approve-contract-id" placeholder="Enter contract ID" required>
                </div>
                <div class="form-group">
                    <label for="approve-milestone-stage">Milestone Stage to Approve:</label>
                    <select id="approve-milestone-stage" required>
                        <option value="">Select stage</option>
                        <option value="1">Stage 1 - Planting</option>
                        <option value="2">Stage 2 - Growing</option>
                        <option value="3">Stage 3 - Harvest</option>
                    </select>
                </div>
                <div class="form-group">
                    <label for="approval-notes">Approval Notes (optional):</label>
                    <textarea id="approval-notes" placeholder="Add notes about the milestone approval"></textarea>
                </div>
                <button type="submit" class="submit-btn">Approve & Pay</button>
            </form>
        </div>
    
        <!-- AgriCoin Balance Section -->
        <div class="card">
            <h3>üí∞ AgriCoin Balance</h3>
            <div id="agricoin-balance">
                <p>Balance: <span id="retailer-agricoin-balance">Loading...</span> AGRI</p>
                <button id="buy-agricoin-btn" class="submit-btn">Buy AgriCoin</button>
            </div>
        </div>
    </div>

    <!-- MetaMask Connection Section -->
    <div id="wallet-section" class="wallet-section">
        <button id="connect-wallet" class="wallet-btn">Connect MetaMask</button>
        <div id="wallet-info" class="wallet-info" style="display: none;">
            <p>Connected: <span id="wallet-address"></span></p>
            <p>Balance: <span id="wallet-balance"></span> ETH</p>
            <button id="disconnect-wallet" class="wallet-btn secondary">Disconnect</button>
        </div>
    </div>

    <script src="app.js"></script>
</body>
</html>